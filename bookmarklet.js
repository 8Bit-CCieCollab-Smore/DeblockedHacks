javascript:(function(){if(window.QUIZALIZE_ANALYZER){document.body.removeChild(window.QUIZALIZE_ANALYZER);delete window.QUIZALIZE_ANALYZER;return}var e=document.createElement("div");window.QUIZALIZE_ANALYZER=e,e.style.cssText="position:fixed;top:50px;left:50px;width:420px;max-height:80vh;overflow:auto;background:#1a1a1a;color:#fff;z-index:999999;padding:16px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,.5);font-family:sans-serif;resize:both;",e.innerHTML='<div style="cursor:move;background:#2c2c2c;padding:6px;border-radius:8px;display:flex;justify-content:space-between;align-items:center;"><span style="font-weight:bold">Quizalize Analyzer</span><button id="qa-exit" style="background:none;border:none;color:#fff;font-size:18px;cursor:pointer">âœ–</button></div><div style="margin-top:10px"><input id="qa-url" type="text" placeholder="Paste Quizalize link..." style="width:100%;padding:6px;border-radius:6px;border:1px solid #444;background:#000;color:#fff"><button id="qa-go" style="margin-top:8px;width:100%;padding:8px;background:#007bff;border:none;border-radius:6px;color:#fff;cursor:pointer;font-weight:bold">Get Answers</button></div><div id="qa-loader" style="display:none;text-align:center;margin:10px 0"><div class="dot-loader"></div></div><div id="qa-results" style="margin-top:10px;font-size:14px;line-height:1.4"></div>';var t=document.createElement("style");t.textContent=".dot-loader{width:60px;height:20px;position:relative;margin:0 auto}.dot-loader:before,.dot-loader:after{content:\"\";position:absolute;top:0;width:20px;height:20px;border-radius:50%;background:linear-gradient(135deg,#007bff,#9b59b6);animation:dotAnim 1s infinite}.dot-loader:after{left:40px;animation-delay:0.5s}@keyframes dotAnim{0%,100%{transform:scale(0.5);opacity:0.5}50%{transform:scale(1);opacity:1}} .qa-highlight{border-left:3px solid #28a745 !important;background:#333 !important;}",document.head.appendChild(t),document.body.appendChild(e);var n=e.firstChild,o=!1,a,c;n.onmousedown=function(t){o=!0,a=t.clientX-e.offsetLeft,c=t.clientY-e.offsetTop},document.onmousemove=function(t){o&&(e.style.left=t.clientX-a+"px",e.style.top=t.clientY-c+"px")},document.onmouseup=function(){o=!1},document.getElementById("qa-exit").onclick=function(){document.body.removeChild(e),delete window.QUIZALIZE_ANALYZER};async function r(e){var t=document.getElementById("qa-results"),n=document.getElementById("qa-loader");t.innerHTML="",n.style.display="block";try{var o=e.match(/\/quiz\/([a-f0-9\-]{36})/),a=o?o[1]:null;if(!a)throw new Error("Invalid URL format.");var c=await fetch("https://app.quizalize.com/ql/apollo",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:"query ContentPreviewModalRendererQuery($contentId:ID!){content:node(id:$contentId){... on Content{payload}}}",variables:{contentId:btoa("Content:"+a)}})});if(!c.ok)throw new Error("Server error "+c.status);var r=await c.json();if(r.errors)throw new Error(JSON.stringify(r.errors));var i=r.data?.content?.payload;if(!i)throw new Error("Quiz payload not found.");var l=JSON.parse(i).questions;l.forEach(function(e,n){var o=(t=>{if("string"!=typeof t)return"";let e=t.replace(/<\/?p>/gi,"").trim();return e.replace(/^(freetextm|freetext|boolean):\/\//,"")})(e.question),a=(t=>{if("string"!=typeof t)return"";let e=t.replace(/<\/?p>/gi,"").trim();return e.replace(/^(freetextm|freetext|boolean):\/\//,"")})(e.answer),c=document.createElement("div");c.className="qa-qblock",c.dataset.index=n,c.style.cssText="background:#2c2c2c;padding:8px;border-radius:6px;margin-bottom:6px;border-left:3px solid #007bff",c.innerHTML="<b>Q"+(n+1)+":</b> "+o+"<br><span style=color:#aaa><b>A:</b> "+a+"</span>",t.appendChild(c)}),setInterval(()=>{let e=document.querySelectorAll("[data-testid='question-text']"),n=-1;e.forEach((e,t)=>{let o=e.getBoundingClientRect();o.top>50&&o.bottom<window.innerHeight-50&&-1===n&&(n=t)}),document.querySelectorAll(".qa-qblock").forEach(e=>{e.classList.remove("qa-highlight")}),n>=0&&document.querySelector(".qa-qblock[data-index='"+n+"']")?.classList.add("qa-highlight")},800)}catch(s){t.innerHTML="<span style=color:#dc3545>Error: "+s.message+"</span>"}finally{n.style.display="none"}}document.getElementById("qa-go").onclick=function(){var e=document.getElementById("qa-url").value.trim();e&&r(e)};var i=!1;document.addEventListener("keydown",function(t){t.ctrlKey&&"c"==t.key.toLowerCase()&&(i=!i,e.style.display=i?"none":"block")})})();
